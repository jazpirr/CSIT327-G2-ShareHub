{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - ShareHub CIT-U</title>
    <link rel="stylesheet" href="{% static 'css/settings.css' %}">
</head>
<body>
  <!-- Top Navigation -->
  <header class="navbar">
    <div class="nav-container">
      <div class="nav-left">
        <div class="logo">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" fill="#7a0019"/>
            <path d="M8 12h8M12 8v8" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span>ShareHub - CIT-U</span>
        </div>
      </div>

      <div class="nav-center">
        <a href="{% url 'home' %}" class="nav-link">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
          </svg>
          Home
        </a>
        <a href="#" class="nav-link">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          Browse
        </a>
        <a href="#" class="nav-link">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
          </svg>
          My Items
        </a>
        <a href="{% url 'profile' %}" class="nav-link">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
          </svg>
          Profile
        </a>
      </div>

      <div class="nav-right">
        <button class="add-item-btn">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
          </svg>
          Add Item
        </button>
        <button class="notification-btn">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
          </svg>
          <span class="notification-badge">3</span>
        </button>
        <form method="post" action="{% url 'logout' %}" style="display:inline;">
          {% csrf_token %}
          <button type="submit" class="logout-btn">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
            </svg>
            Logout
          </button>
        </form>
      </div>
    </div>
  </header>

  <!-- ===== MAIN CONTENT ===== -->
  <div class="main-content">
    <!-- Page Header -->
    <div class="page-header">
      <h1>Settings</h1>
      <p>Manage your account settings and preferences</p>
    </div>

    <!-- Settings Layout -->
    <div class="settings-layout">
      <!-- Sidebar -->
      <aside class="settings-sidebar">
        <button class="sidebar-item active" data-tab="account">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
          </svg>
          Account Settings
          <svg class="chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>
        <button class="sidebar-item" data-tab="notifications">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
          </svg>
          Notifications
          <svg class="chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>
        <button class="sidebar-item" data-tab="privacy">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
          </svg>
          Privacy & Security
          <svg class="chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>
      </aside>

      <!-- Main Settings Content -->
      <div class="settings-content">
        
        <!-- Account Tab -->
        <div id="account-tab" class="tab-content active">
          <h2>Account Information</h2>
          
          <div class="settings-form">
            <!-- Personal Information -->
            <h3>Personal Information</h3>
            <div class="form-grid">
              <div class="form-group">
                <label for="firstName">First Name</label>
                <input type="text" id="firstName" data-field="first_name" value="{{ user_info.first_name }}" placeholder="Enter your first name" autocomplete="given-name">
                <span id="firstName-error" class="validation-message"></span>
              </div>
              <div class="form-group">
                <label for="lastName">Last Name</label>
                <input type="text" id="lastName" data-field="last_name" value="{{ user_info.last_name }}" placeholder="Enter your last name" autocomplete="family-name">
                <span id="lastName-error" class="validation-message"></span>
              </div>
              <div class="form-group full-width">
                <label for="email">Email Address</label>
                <input type="email" id="email" data-field="email" value="{{ user_info.email }}" placeholder="your.email@example.com" autocomplete="email">
                <span id="email-error" class="validation-message"></span>
              </div>
            </div>

            <!-- Password Section -->
            <div class="password-section">
              <h3>Change Password</h3>
              <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 15px;">Leave blank if you don't want to change your password</p>
              <div class="form-grid">
                <div class="form-group full-width">
                  <label for="currentPassword">Current Password</label>
                  <input type="password" id="currentPassword" placeholder="Enter current password" autocomplete="current-password">
                  <span id="current-password-error" class="validation-message"></span>
                </div>
                <div class="form-group">
                  <label for="newPassword">New Password</label>
                  <input type="password" id="newPassword" placeholder="At least 8 characters" autocomplete="new-password">
                  <span id="new-password-error" class="validation-message"></span>
                </div>
                <div class="form-group">
                  <label for="confirmPassword">Confirm New Password</label>
                  <input type="password" id="confirmPassword" placeholder="Re-enter new password" autocomplete="new-password">
                  <span id="confirm-password-error" class="validation-message"></span>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="form-actions">
              <button type="button" id="cancelBtn" class="btn-secondary">Cancel</button>
              <button type="button" id="saveBtn" class="btn-primary" disabled>Save Changes</button>
            </div>
          </div>
        </div>

        <!-- Notifications Tab -->
        <div id="notifications-tab" class="tab-content">
          <h2>Notification Preferences</h2>
          
          <div class="settings-form">
            <div class="notification-item">
              <div class="notification-info">
                <label for="emailNotifications">Email Notifications</label>
                <p>Receive email updates about your borrowed items</p>
              </div>
              <input type="checkbox" id="emailNotifications" data-field="email_notifications" autocomplete="on">
            </div>
            
            <div class="notification-item">
              <div class="notification-info">
                <label for="dueDateReminders">Due Date Reminders</label>
                <p>Get notified 2 days before items are due</p>
              </div>
              <input type="checkbox" id="dueDateReminders" data-field="due_date_reminders" autocomplete="on">
            </div>

            <div class="form-actions">
              <button type="button" id="cancelBtn" class="btn-secondary">Cancel</button>
              <button type="button" id="saveBtn" class="btn-primary" disabled>Save Changes</button>
            </div>
          </div>
        </div>

        <!-- Privacy Tab -->
        <div id="privacy-tab" class="tab-content">
          <h2>Privacy & Security</h2>
          
          <div class="settings-form">
            <div class="notification-item">
              <div class="notification-info">
                <label for="profileVisibility">Profile Visibility</label>
                <p>Make your profile visible to other students</p>
              </div>
              <input type="checkbox" id="profileVisibility" data-field="profile_visibility" autocomplete="on">
            </div>
            
            <div class="notification-item">
              <div class="notification-info">
                <label for="contactInfo">Share Contact Info</label>
                <p>Share your contact details with item owners</p>
              </div>
              <input type="checkbox" id="contactInfo" data-field="contact_info" autocomplete="on">
            </div>

            <div class="form-actions">
              <button type="button" id="cancelBtn" class="btn-secondary">Cancel</button>
              <button type="button" id="saveBtn" class="btn-primary" disabled>Save Changes</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast">
    <svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
    </svg>
    <span class="toast-message">Settings saved successfully!</span>
  </div>

  <script src="{% static 'js/settings.js' %}"></script>
</body>
</html>